<!DOCTYPE html>
<html>
<head>
    <title>SayCula - Calculator</title>
    <link rel="stylesheet" href="./styles/rune.css">
    <link rel="stylesheet" href="./styles/styles.css">
    
    <style>

        .calculator {
            font-family: 'Cairo', sans-serif;
            display: flex;
            justify-content: center;
            justify-items: center;
            width: 50%;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #cccccc52;
            border-radius: 5px;
            background-color: #f4f4f411;
            align-content: center;
            flex-direction: column;
            align-items: center;
            flex-wrap: nowrap;
            border-radius: 5%;
            position: absolute;
            top: 50%;
            left: 50%;
            right: 50%;
            transform: translate(-50%, -50%);
        }
        input {
            font-family: 'Cairo', sans-serif;
        }
        input[type="button"] {
            color: rgb(0 0 0);
        }

        input[type="text"] {
            border: white solid 1px;
            
            border-radius: 10%;
            margin: 5px;
            background: none;
            width: 100%;
            height: 50px;
            font-size: 20px;
            text-align: right;
            padding-right: 10px;
        }
        .rune {
            width: 50px;
            height: 50px;
            font-size: 20px;
            margin: 5px;
            cursor: pointer;
        }
        #result {
            color: black;
        }
        #operations {
            font-size: 14px;
            margin-top: 10px;
            white-space: pre-line;
        }
        ::placeholder {
            text-align: center;
            color: rgb(209, 209, 209);
            
        }
        .btn-rune{
            padding: 10px 5px;
            color: white;
        }
   
        li {
            display: flex;
            font-size: 16px;
            color: #333;
            padding: 5px 10px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 5px;
            flex-direction: column-reverse;
            align-content: center;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }
        li:hover {
            background-color: #9c7f7f;
        }
        #itemList {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            align-content: center;
            flex-direction: row;
        }
        .btns-cal input{
            background: none;
            border: #ffffff solid 1px;
            border-radius: 20%;
            margin: 10px;
            padding: 5px 20px;
        }
        .btns-cal input:hover{
            background: #ffffff;
            color: black;
            border: white solid 1px;
            border-radius: 10px;
        }

        #operations {
           text-align: center;
        }
        #movable-box {
            margin: 15px;
            width: 100px;
            height: 100px;
            background-color: #3498db;
            position: absolute;
            transition: transform 0.2s ease;
        }
    </style>
</head>
<body>
    
    
    <div class="calculator">
        
            <p id="operations">redrwe</p>
        
        <input type="text" id="num1" placeholder="pods">
        <p>The result: <span id="result"></span></p>
        <input type="text" id="filterInput" placeholder="filter">

        <div class="btns-cal">
            <input type="button" class="btn-rune" value="Clear" onclick="clearFields()">
            <input type="button" class="btn-rune" value="إعادة تعيين" onclick="resetFields()">
        </div>
       
        <ul id="itemList"></ul>
        

    </div>
    
    <script>
  const movableBox = document.getElementById('movable-box');
        let isDragging = false;
        let offsetX, offsetY;

        movableBox.addEventListener('mousedown', (e) => {
            isDragging = true;
            offsetX = e.clientX - movableBox.getBoundingClientRect().left;
            offsetY = e.clientY - movableBox.getBoundingClientRect().top;
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                movableBox.style.transform = `translate(${e.clientX - offsetX}px, ${e.clientY - offsetY}px)`;
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });

    </script>
    <script src="./bin/data/data-rune.js"></script>
    <script>
  var selectedPercentage = 1;
        var previousResult = "";
        var operationsList = [];

        function setPercentage(percentage) {
            selectedPercentage = percentage;
            calculate();
            var num1 = parseFloat(document.getElementById("num1").value);
            var result = (num1 - selectedPercentage);
            operationsList.push(`${num1} - ${selectedPercentage} = ${result.toFixed(2)}`);
            updateOperations();
            document.getElementById("num1").value = result.toFixed(2);
        }

        function calculate() {
            var num1 = parseFloat(document.getElementById("num1").value);

            if (!isNaN(num1)) {
                var result = (num1 - selectedPercentage);
                previousResult = result;
                document.getElementById("result").textContent = result.toFixed(2);
            } else {
                document.getElementById("result").textContent = "";
            }
        }

        function clearFields() {
            document.getElementById("num1").value = "";
            document.getElementById("result").textContent = "";
        }

        function resetFields() {
            document.getElementById("num1").value = previousResult.toFixed(2); // إعادة النتيجة السابقة
            document.getElementById("result").textContent = previousResult.toFixed(2);
            operationsList = [];
            updateOperations();
        }

        function updateOperations() {
            var operationsDiv = document.getElementById("operations");
            operationsDiv.innerHTML = "<strong>عمليات:</strong><br>" + operationsList.join("<br>");
        }

        var filterInput = document.getElementById("filterInput");
        var itemList = document.getElementById("itemList");
        
        // استمع لحدث التغيير في حقل الإدخال
        filterInput.addEventListener("input", function() {
            var filterValue = filterInput.value.toLowerCase(); // احصل على النص المدخل وقم بتحويله إلى حروف صغيرة

            // احصل على قائمة العناصر
            var items = itemList.getElementsByTagName("li");

            // قم بفحص كل عنصر وإظهاره أو إخفاؤه بناءً على التصفية
            for (var i = 0; i < items.length; i++) {
                var item = items[i];
                var text = item.textContent.toLowerCase(); // احصل على نص العنصر وقم بتحويله إلى حروف صغيرة
                
                // قم بفحص مطابقة النص مع البحث
                if (text.includes(filterValue)) {
                    item.style.display = "block"; // إظهار العنصر إذا كان مطابقًا
                } else {
                    item.style.display = "none"; // إخفاء العنصر إذا لم يكن مطابقًا
                }
            }
        });

    </script>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</body>
</html>
